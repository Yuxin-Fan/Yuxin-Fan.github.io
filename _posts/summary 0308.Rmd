---
layout: post
title: Post with a Background Image
description: "Sample post with a background image CSS override."
tags: [sample post]
image:
  background: triangular.png
---
#1. 条件语句
if 常用的两种方式：if-else/ifelse

##1.1 if-else 结构

> if (cond) statement

> if (cond) statement1 else staement2

```{r}
x = 5
if (x>= 0) sqrt(x) else NA
```

## 1.2 ifelse 结构

 它是 if-else 结构的紧凑化版本
 
> ifelse(cond, statement1, statement2)

```{r}

ifelse(x >= 0,sqrt(x),NA)
```

## 1.3 备注，一些小问题

**但前者在 x 为矩阵时，前者有可能报错，例如**

```{r}

X <- matrix(1:4,4)
if (X>= 0) sqrt(X) else NA
ifelse( X >= 0, sqrt(X),NA)
Y <- matrix(-3:0,4)
if (Y >= 0) sqrt(Y) else NA
ifelse( Y >= 0, sqrt(Y),NA)

```


##1.4 总结规律

> 常用模板
 if ( CONDITION ) 
 { 
   STATEMENT1 
   STATEMENT2 
   ETC 
 } 

> STATEMENT1是你想要执行的指令
 if ( CONDITION ) 
 { 
   STATEMENT1 
   STATEMENT2 
   ETC }
 else { 
   STATEMENT3 
   STATEMENT4
   ETC 
 }

# 2. 循环结构 
主要有三个表现形式：
# 1. for 循环
# 2. while 循环
# 3. repeat （不太常用）
# 简单区分：
# 终止条件已知，则用 for 循环； 不知道循环次数使用 while/repeat 

## 2.1. for 循环
### 2.1.1 e.g.1

i 从 1 到 5, 分别被输出 1 到 i 

```{r}
for (i in 1:5) print (1:i)
```

### 2.1.2 e.g.2

```{r}
for (i in 1:10) print ( "Hello")
```
 "Hello" 被输出 10 次

## 2.2 while 循环
###2.2.1 e.g.1

```{r}

i=1
while ( i <= 5){
  print(1:i)
  i=i+1
}

# 与 for 循环 e.g.1 类似
```

### 2.2.2 e.g.2

```{r}
i <- 10
while (i > 0) {print ("Hello"); i <- i-1}
```

 与 for 循环 e.g.2 类似
 
 需要确保 while 的条件语句能够改变，即在某个时候不再为真——否则循环将永无休止
`*e.g. i <- i-1*`

##2.3 repeat 循环

```{r}
i=1
repeat {
  print (1:i)
  i=i+1
  if (i >5) break
}

```

##2.4 总结-如上所述：

1. repeat 循环通过 break 跳出循环

2. while 循环：while (条件) {命令函数}

3. for 循环：for (变量 in 向量) {命令函数}


### 通用模板

> while 循环
　while (CONDITION)
 { STATEMENT1
   STATEMENT2
   ETC
 }

 **这里 {} 是你的循环的限制，如果不加 {}, while 循环将只考虑 STATEMENT1**

> for 循环
 for (VAR in VECTOR)
 { STATEMENT1
   STATEMENT2
   ETC
 }


# 3. 编写函数

 编写自己的函数,
 R的优点之一就是用户可以自行添加函数,
 良好的编程习惯，是将一个800行的口水程序，改成一个个子函数,
 创造一个函数，其对象只在函数内部使用，返回值可以自由设定（标量、列表均可）

##3.1 函数编写模板

> FNAME <- function ( ARG1, ARG2, ETC )
 {  
   STATEMENT1 
   STATEMENT2 
   ETC 
   return( VALUE ) 
 }

**具体步骤**
 
 1. 首先给出函数名（自定义）

 2. 其次是函数中需要的自变量列表

{ 包含你的函数所需要的命令语句 }

 3. return 返回你的函数输出



##3.2 编写举例

###3.2.1 e.g.1 种群数量成长函数（绘图）



```{r}
ricker <- function(nzero, r, K=1, time=100, from=0, to=time){
  N <- numeric(time+1) # 数值型向量赋值
  N[1] <- nzero # 更改长度
  for (i in 1:time) N[i+1] <- N[i]*exp(r*(1 - N[i]/K))
  # 该迭代模型广泛应用于种群数量变化（e.g.鱼类种群数量变化）
  # r 为成长率；nzero 为初始群体数量
  Time <- 0:time # 迭代步长
  plot(Time, N, type="l", xlim=c(from, to))
}

```

 这是一个简单的画图函数 

 按照喜好命名为 ricker

 它的主要自变量是 nzero 与 r，其他变量都有缺省值

 我们在使用它之前，首先需要载入内存

```{r}

layout(matrix(1:3, 3, 1))
ricker(0.1, 1); title("r = 1")
ricker(0.1, 2); title("r = 2")
ricker(0.1, 3); title("r = 3")

```

###3.2.2 e.g.2 描述性统计量计算函数
 函数要求：
 
 1. 该函数用于计算数据对象的集中趋势和散布情况

 2. 选择性地给出参数统计量（均值和标准差）
      和非参数统计量（中位数和绝对中位差）

 3. 结果以一个含名称列表的形式给出

 4. 函数默认计算统计量并且不输出结果

```{r}
mystats <- function(x,parametric = T, print = F){
  if (parametric) {
    center <- mean(x); spread <- sd(x)
  } else {
    center <- median(x); spread <- mad(x)
  }
  if (print & parametric) {
    cat("Mean=", center, "\n", "SD=", spread, "\n")
  } else if (print & !parametric){
    cat("Median=", center, "\n", "MAD=", spread, "\n")   
  }
  result <- list(center=center, spread=spread)
  return(result)
}
```

**数据实践**

```{r}
x <- rnorm(500)
y <- mystats(x)
attributes(y)
# 包含均值 y$center, 标准差 y$spread
y <- mystats(x, parametric =F, print = T)
```
